{"mappings":"AAAA,MAAMA,EAAoB,EAACC,aACzBA,EAAYC,cACZA,EAAaC,KACbA,EAAIC,MACJA,EAAKC,MACLA,EAAKC,SACLA,EAAQC,UACRA,KAES,2CACKN,cAAyBC,WAAuBC,oKAGJC,oHAGAC,uHAGGC,wHAGCC,iDClB1DC,EAAO,CACXC,WAAYC,SAASC,cAAc,gBACnCC,cAAeF,SAASC,cAAc,YACtCE,YAAaH,SAASC,cAAc,eAGhCG,EAAoB,ICRX,MAMbC,oBACE,OAAOC,MACL,qEAAoCC,KAAKC,4EAA4ED,KAAKE,oBAEzHC,MAAKC,GAAYA,EAASC,SAC1BF,MAAKG,IACJN,KAAKE,MAAQ,EACNI,I,CAIbC,YACEP,KAAKE,KAAO,C,CAGVM,YACF,OAAOR,KAAKC,W,CAGVO,UAAMC,GACRT,KAAKC,YAAcQ,C,CAzBrBC,cACEV,KAAKC,YAAc,GACnBD,KAAKE,KAAO,C,GDOhB,IAAIS,EAAqB,EAsDzB,SAASC,EAAoBC,GAC3B,MAAMC,EAASD,EAAKE,IAAIhC,GACxBQ,EAAKI,cAAcqB,mBAAmB,YAAaF,EAAOG,KAAK,I,CAOjE,SAASC,IACP3B,EAAKK,YAAYuB,UAAUC,IAAI,aAC/B7B,EAAKK,YAAYyB,aAAa,YAAY,E,CAG5C,SAASC,IACP/B,EAAKK,YAAYuB,UAAUI,OAAO,aAClChC,EAAKK,YAAY4B,gBAAgB,W,CApEnCjC,EAAKC,WAAWiC,iBAAiB,UAKjC,SAAsBC,GAOpB,GANAA,EAAMC,iBAmDR,WACEpC,EAAKI,cAAciC,UAAY,E,CAlD/BC,GAEAhC,EAAkBW,MAAQkB,EAAMI,cAAcC,SAAS9B,YAAY+B,MAEnC,KAA5BnC,EAAkBW,MACpB,OAAOyB,MAAM,+BAGfpC,EAAkBU,YAClBV,EAAkBC,oBAAoBK,MAAK,EAACU,KAAEA,EAAIqB,UAAEA,MAClD,GAAmB,GAAfrB,EAAKsB,OACP,OAAOF,MACL,4EAGFA,MAAM,oBAAoBC,aAC1BtB,EAAoBC,GAAOS,IAE7BX,GAAsBE,EAAKsB,MAAM,G,IAzBrC5C,EAAKK,YAAY6B,iBAAiB,SA6BlC,WACEP,IACArB,EAAkBC,oBAAoBK,MAAK,EAACU,KAAEA,EAAIqB,UAAEA,MAClDtB,EAAoBC,GAAOS,IAAcX,GAAsBE,EAAKsB,OACpE,MAAQC,OAAQC,GAAe5C,SAC5BC,cAAc,YACd4C,kBAAkBC,wBAMrB,GAJAC,OAAOC,SAAS,CACdC,IAAkB,EAAbL,EACLM,SAAU,WAERhC,IAAuBuB,EAGzB,OAFAU,QAAQC,IAAIlC,EAAoBuB,GAChChB,IACOe,MACL,6D,OA3CRf","sources":["src/createGalleryItem.js","src/index.js","src/getGalleryItems.js"],"sourcesContent":["const createGalleryItem = ({\n  webformatURL,\n  largeImageURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) => {\n    return `<div class=\"photo-card\">\n    <img src=\"${webformatURL}\" srcset=\"${largeImageURL}\" alt=\"${tags}\" loading=\"lazy\" width = 400px height = 350px/>\n    <div class=\"info\">\n      <p class=\"info-item\">\n        <b class = \"info-element\"><span>Likes</span><span>${likes}</span></b>\n      </p>\n      <p class=\"info-item\">\n        <b class = \"info-element\"><span>Views</span><span>${views}</span></b>\n      </p>\n      <p class=\"info-item\">\n        <b class = \"info-element\"><span>Comments</span><span>${comments}</span></b>\n      </p>\n      <p class=\"info-item\">\n        <b class = \"info-element\"><span>Downloads</span><span>${downloads}</span></b>\n      </p>\n    </div>\n  </div>`;\n};\n\nexport { createGalleryItem };\n","import './css/common.css';\nimport GalleryAPIService from './getGalleryItems';\nimport { createGalleryItem } from './createGalleryItem';\n\nconst refs = {\n  searchForm: document.querySelector('.search-form'),\n  imagesGallery: document.querySelector('.gallery'),\n  loadMoreBtn: document.querySelector('.load-more'),\n};\n\nconst galleryAPIService = new GalleryAPIService();\n\nlet totalAmountOfPages = 0;\n\nrefs.searchForm.addEventListener('submit', onFormSubmit);\nrefs.loadMoreBtn.addEventListener('click', onLoadMore);\n\ndisableBtn();\n\nfunction onFormSubmit(event) {\n  event.preventDefault();\n\n  clearGalleryMurkup();\n\n  galleryAPIService.query = event.currentTarget.elements.searchQuery.value;\n\n  if (galleryAPIService.query === '') {\n    return alert(`Please enter a search query`);\n  }\n\n  galleryAPIService.resetPage();\n  galleryAPIService.fetchGalleryItems().then(({ hits, totalHits }) => {\n    if (hits.length == 0) {\n      return alert(\n        `Sorry, there are no images matching your search query. Please try again.`\n      );\n    } else {\n      alert(`Hooray! We found ${totalHits} images.`);\n      createGalleryMarkup(hits), enableBtn();\n    }\n    totalAmountOfPages += hits.length;\n  });\n}\n\nfunction onLoadMore() {\n  disableBtn();\n  galleryAPIService.fetchGalleryItems().then(({ hits, totalHits }) => {\n    createGalleryMarkup(hits), enableBtn(), (totalAmountOfPages += hits.length);\n    const { height: cardHeight } = document\n      .querySelector('.gallery')\n      .firstElementChild.getBoundingClientRect();\n\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n    if (totalAmountOfPages === totalHits) {\n      console.log(totalAmountOfPages, totalHits);\n      disableBtn();\n      return alert(\n        `We're sorry, but you've reached the end of search results.`\n      );\n    }\n  });\n}\n\nfunction createGalleryMarkup(hits) {\n  const markup = hits.map(createGalleryItem);\n  refs.imagesGallery.insertAdjacentHTML('beforeend', markup.join(''));\n}\n\nfunction clearGalleryMurkup() {\n  refs.imagesGallery.innerHTML = '';\n}\n\nfunction disableBtn() {\n  refs.loadMoreBtn.classList.add('is-hidden');\n  refs.loadMoreBtn.setAttribute('disabled', true);\n}\n\nfunction enableBtn() {\n  refs.loadMoreBtn.classList.remove('is-hidden');\n  refs.loadMoreBtn.removeAttribute('disabled');\n}\n","const URL = 'pixabay.com/api';\nconst API_KEY = '31930152-30d8507b21f279e62dc6170e1';\nexport default class GalleryAPIService {\n  constructor() {\n    this.searchQuery = '';\n    this.page = 1;\n  }\n\n  fetchGalleryItems() {\n    return fetch(\n      `https://${URL}/?key=${API_KEY}&q=${this.searchQuery}&image_type=photo&orientation=horizontal&safesearch=true&page=${this.page}&per_page=40`\n    )\n      .then(response => response.json())\n      .then(data => {\n        this.page += 1;\n        return data;\n      });\n  }\n\n  resetPage() {\n    this.page = 1;\n  }\n\n  get query() {\n    return this.searchQuery;\n  }\n\n  set query(newQuery) {\n    this.searchQuery = newQuery;\n  }\n}\n"],"names":["$f5843d77db05cb85$export$58d4aaccf9eb6517","webformatURL","largeImageURL","tags","likes","views","comments","downloads","$1f0dc3b9307be026$var$refs","searchForm","document","querySelector","imagesGallery","loadMoreBtn","$1f0dc3b9307be026$var$galleryAPIService","fetchGalleryItems","fetch","this","searchQuery","page","then","response","json","data","resetPage","query","newQuery","constructor","$1f0dc3b9307be026$var$totalAmountOfPages","$1f0dc3b9307be026$var$createGalleryMarkup","hits","markup","map","insertAdjacentHTML","join","$1f0dc3b9307be026$var$disableBtn","classList","add","setAttribute","$1f0dc3b9307be026$var$enableBtn","remove","removeAttribute","addEventListener","event","preventDefault","innerHTML","$1f0dc3b9307be026$var$clearGalleryMurkup","currentTarget","elements","value","alert","totalHits","length","height","cardHeight","firstElementChild","getBoundingClientRect","window","scrollBy","top","behavior","console","log"],"version":3,"file":"index.f4524cc1.js.map"}